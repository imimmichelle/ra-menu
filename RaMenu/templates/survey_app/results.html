{% extends "user_app/base.html" %}
{% block bodyblock %}
{% load my_templates %}

<style>
    table {
      border-collapse: collapse;
      width: 30%;
    }
    
    th, td {
      text-align: center;
      padding: 16px;
    }
    
    tr:nth-child(odd) {
      background-color: #f5f2f7;
    }

    input[type=button], input[type=submit] {
        background-color: #EFE8F7;
        border: none;
        color: black;
        padding: 16px 32px;
        text-decoration: none;
        margin: 4px 2px;
        cursor: pointer;
      }

    </style>
    
<h1>RESULTS</h1>


<table>
    <tr>
        <td> Desire</td>
        <td>Result</td>
        {% for user in users  %}
            <td>{{user.username}} </td>
        {% endfor %}
    </tr>
    {% for desire in desires %}
        <tr>
            <td> {{desire.desire_name}} </td>
            <td> 
                {% comment "" %} matching {% endcomment %}
                {% if users|length == 2 %}
                {% for p in preferences|desire:desire|user:user1 %}
                    {% with p.answer as answer1 %}
                    {% for p in preferences|desire:desire|user:user2 %}
                    {% with p.answer as answer2 %}

                    {% if answer1 == "YES" and answer2 == "YES" %}
                    <font color='green'>YES</font>
                    {% elif  answer1 == "YES" and answer2 == "MAYBE"%}
                    <font color='green'>YES</font>
                    {% elif  answer1 == "MAYBE" and answer2 == "YES"%}
                    <font color='green'>YES</font>
                    {% elif  answer1 == "MAYBE" and answer2 == "MAYBE"%}
                    <font color='blue'>MAYBE</font>
                    {% elif  answer1 == "NO" or answer2 == "NO"%}
                    <font color='tomato'>NO</font>
                    {% endif %}

                    {% endwith %}
                    {% endfor %} 
                    {% endwith %}
                {% endfor %}
                {% endif %}
            </td>
            {% for user in users  %}
            <td> 
                {% for p in preferences|desire:desire|user:user %}
                    {{p.answer}}
                    {% endfor %}
            </td>
            {% endfor %}
        </tr>
    {% endfor %}
</table>

{% for desire in desires %}{% endfor %}


{% endblock bodyblock %}